# ë°ì´í„° íŒŒì´í”„ë¼ì¸ ìë™í™” ê·œì¹™ (Data Pipeline Automation Rules)

ì´ ê·œì¹™ì€ ë¹„ì „ ì‹œìŠ¤í…œì˜ 9ë‹¨ê³„ ë°ì´í„° ìƒëª…ì£¼ê¸°ë¥¼ ìë™í™”í•˜ê¸° ìœ„í•œ ê°œë°œ í‘œì¤€ì…ë‹ˆë‹¤.

## ğŸ“Š 9ë‹¨ê³„ ë°ì´í„° ìƒëª…ì£¼ê¸° í‘œì¤€

### í•„ìˆ˜ ì ìš© ë‹¨ê³„ (ëª¨ë“  ë„ë©”ì¸)
```
1. Raw Data Collection      # ì›ë³¸ ë°ì´í„° ìˆ˜ì§‘
2. Feature Extraction       # íŠ¹ì´ì  ì¶”ì¶œ  
3. Similarity Clustering    # ìœ ì‚¬ë„ ê·¸ë£¹í•‘
4. Group Labeling          # ë¼ë²¨ë§
5. Embedding Generation    # ì„ë² ë”© ìƒì„±
6. Realtime Recognition    # ì‹¤ì‹œê°„ ì¸ì‹
7. Database Management     # ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
8. Performance Monitoring  # ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
9. Continuous Learning     # ì§€ì†ì  í•™ìŠµ
```

## ğŸ—ï¸ í‘œì¤€ ë°ì´í„° í´ë” êµ¬ì¡° (ìë™ ìƒì„±)

### ëª¨ë“  ë„ë©”ì¸ì— ì ìš©ë˜ëŠ” í•„ìˆ˜ êµ¬ì¡°
```
data/domains/{domain}/{feature}/
â”œâ”€â”€ 1_raw/                  # 1ë‹¨ê³„: ì›ë³¸ ë°ì´í„°
â”‚   â”œâ”€â”€ uploads/            # ì‚¬ìš©ì ì§ì ‘ ì—…ë¡œë“œ
â”‚   â”œâ”€â”€ captures/           # í•˜ë“œì›¨ì–´ ìë™ ìº¡ì²˜
â”‚   â”œâ”€â”€ imports/            # ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™
â”‚   â””â”€â”€ README.md           # ë‹¨ê³„ë³„ ì„¤ëª…
â”œâ”€â”€ 2_extracted/            # 2ë‹¨ê³„: íŠ¹ì´ì  ì¶”ì¶œ
â”‚   â”œâ”€â”€ features/           # ê²€ì¶œëœ íŠ¹ì´ì 
â”‚   â”œâ”€â”€ metadata/           # ê²€ì¶œ ë©”íƒ€ë°ì´í„°
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ 3_clustered/            # 3ë‹¨ê³„: ìœ ì‚¬ë„ ê·¸ë£¹í•‘
â”‚   â”œâ”€â”€ auto_groups/        # ìë™ ê·¸ë£¹í•‘ ê²°ê³¼
â”‚   â”œâ”€â”€ similarity_matrix/  # ìœ ì‚¬ë„ ë§¤íŠ¸ë¦­ìŠ¤
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ 4_labeled/              # 4ë‹¨ê³„: ë¼ë²¨ë§
â”‚   â”œâ”€â”€ groups/             # ë¼ë²¨ë§ëœ ê·¸ë£¹ë“¤
â”‚   â”œâ”€â”€ unknown/            # ë¯¸ë¶„ë¥˜ ë°ì´í„°
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ 5_embeddings/           # 5ë‹¨ê³„: ì„ë² ë”© ìƒì„±
â”‚   â”œâ”€â”€ vectors/            # ì„ë² ë”© ë²¡í„°
â”‚   â”œâ”€â”€ index/              # ê²€ìƒ‰ ì¸ë±ìŠ¤
â”‚   â”œâ”€â”€ metadata/           # ì„ë² ë”© ë©”íƒ€ë°ì´í„°
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ cache/                  # ì²˜ë¦¬ ìºì‹œ
â”œâ”€â”€ models/                 # ë„ë©”ì¸ë³„ ëª¨ë¸
â””â”€â”€ README.md               # ì „ì²´ íŒŒì´í”„ë¼ì¸ ì„¤ëª…
```

## ğŸ¤– ìë™í™” ìŠ¤í¬ë¦½íŠ¸ í•„ìˆ˜ êµ¬í˜„

### 1. ë„ë©”ì¸ ìë™ ìƒì„± ìŠ¤í¬ë¦½íŠ¸
```python
# scripts/create_domain.py (í•„ìˆ˜)
def create_domain_structure(domain: str, feature: str):
    """
    ìƒˆë¡œìš´ ë„ë©”ì¸ ìƒì„± ì‹œ 9ë‹¨ê³„ êµ¬ì¡°ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
    
    Args:
        domain: ë„ë©”ì¸ëª… (humanoid, factory, powerline_inspection)
        feature: ê¸°ëŠ¥ëª… (face_recognition, defect_detection, inspection)
    
    ìë™ ìƒì„± í•­ëª©:
    - 9ë‹¨ê³„ ë°ì´í„° í´ë” êµ¬ì¡°
    - ê° ë‹¨ê³„ë³„ README.md
    - __init__.py íŒŒì¼ë“¤
    - ê¸°ë³¸ ì„¤ì • íŒŒì¼
    """
    pass

# ì‚¬ìš©ë²•
# python scripts/create_domain.py humanoid emotion_detection
```

### 2. íŒŒì´í”„ë¼ì¸ ìë™ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸  
```python
# scripts/run_pipeline.py (í•„ìˆ˜)
def run_pipeline(domain: str, feature: str, stage: str = None):
    """
    9ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.
    
    Args:
        domain: ë„ë©”ì¸ëª…
        feature: ê¸°ëŠ¥ëª…  
        stage: íŠ¹ì • ë‹¨ê³„ë§Œ ì‹¤í–‰ (ì„ íƒì )
    
    ì‹¤í–‰ ìˆœì„œ:
    1. ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
    2. ì´ì „ ë‹¨ê³„ ì™„ë£Œ í™•ì¸
    3. í˜„ì¬ ë‹¨ê³„ ì‹¤í–‰
    4. ê²°ê³¼ ê²€ì¦
    5. ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„
    """
    pass

# ì‚¬ìš©ë²•
# python scripts/run_pipeline.py humanoid face_recognition
# python scripts/run_pipeline.py humanoid face_recognition --stage 2_extract_features
```

### 3. íŒŒì´í”„ë¼ì¸ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
```python
# scripts/validate_pipeline.py (í•„ìˆ˜)
def validate_pipeline_structure(domain: str, feature: str):
    """
    9ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ êµ¬ì¡°ì™€ ë°ì´í„° ë¬´ê²°ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.
    
    ê²€ì¦ í•­ëª©:
    - í•„ìˆ˜ í´ë” ì¡´ì¬ ì—¬ë¶€
    - ê° ë‹¨ê³„ë³„ ë°ì´í„° ìœ íš¨ì„±
    - íŒŒì´í”„ë¼ì¸ ì§„í–‰ ìƒíƒœ
    - ëª¨ë¸ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€
    - ì„¤ì • íŒŒì¼ ìœ íš¨ì„±
    """
    pass

# Git pre-commit í›…ì—ì„œ ìë™ ì‹¤í–‰
```

## ğŸ“‹ ë‹¨ê³„ë³„ ëª¨ë¸ ì‚¬ìš© ê·œì¹™

### ì–¼êµ´ì¸ì‹ ë„ë©”ì¸ í•„ìˆ˜ ëª¨ë¸
```python
FACE_RECOGNITION_MODELS = {
    'stage_2_extraction': {
        'detection': 'retinaface',          # ì–¼êµ´ ê²€ì¶œ
        'alignment': 'face_alignment',      # ì–¼êµ´ ì •ë ¬
        'quality': 'quality_assessment'     # í’ˆì§ˆ í‰ê°€
    },
    'stage_3_clustering': {
        'embedding': 'arcface',             # ì„ë² ë”© ìƒì„±
        'clustering': 'dbscan'              # í´ëŸ¬ìŠ¤í„°ë§
    },
    'stage_5_embedding': {
        'embedding': 'arcface',             # ê³ í’ˆì§ˆ ì„ë² ë”©
        'indexing': 'faiss'                 # ë²¡í„° ì¸ë±ìŠ¤
    },
    'stage_6_realtime': {
        'detection': 'retinaface_light',    # ê²½ëŸ‰ ê²€ì¶œ
        'embedding': 'arcface_light',       # ê²½ëŸ‰ ì„ë² ë”©
        'search': 'faiss'                   # ë¹ ë¥¸ ê²€ìƒ‰
    }
}
```

### ë¶ˆëŸ‰ê²€ì¶œ ë„ë©”ì¸ í•„ìˆ˜ ëª¨ë¸
```python
DEFECT_DETECTION_MODELS = {
    'stage_2_extraction': {
        'detection': 'yolov8',              # ë¶ˆëŸ‰ ê²€ì¶œ
        'segmentation': 'defect_segmentation', # ë¶ˆëŸ‰ ì˜ì—­ ë¶„í• 
        'classification': 'resnet50'        # ë¶ˆëŸ‰ ë¶„ë¥˜
    },
    'stage_3_clustering': {
        'embedding': 'resnet50',            # ë¶ˆëŸ‰ ì„ë² ë”©
        'clustering': 'dbscan'              # í´ëŸ¬ìŠ¤í„°ë§
    },
    'stage_5_embedding': {
        'embedding': 'resnet50',            # ê³ í’ˆì§ˆ ì„ë² ë”©
        'indexing': 'faiss'                 # ë²¡í„° ì¸ë±ìŠ¤
    },
    'stage_6_realtime': {
        'detection': 'yolov8_light',        # ê²½ëŸ‰ ê²€ì¶œ
        'classification': 'resnet50_light', # ê²½ëŸ‰ ë¶„ë¥˜
        'search': 'faiss'                   # ë¹ ë¥¸ ê²€ìƒ‰
    }
}
```

## ğŸ”„ ìë™í™” ì›Œí¬í”Œë¡œìš°

### 1. ìƒˆë¡œìš´ ë„ë©”ì¸/ê¸°ëŠ¥ ê°œë°œ ì‹œ
```bash
# 1ë‹¨ê³„: ë„ë©”ì¸ êµ¬ì¡° ìë™ ìƒì„±
python scripts/create_domain.py [ë„ë©”ì¸] [ê¸°ëŠ¥]

# 2ë‹¨ê³„: ê°œë°œ í™˜ê²½ ìë™ ì„¤ì •
python scripts/setup_development_environment.py [ë„ë©”ì¸] [ê¸°ëŠ¥]

# 3ë‹¨ê³„: íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
python scripts/run_pipeline.py [ë„ë©”ì¸] [ê¸°ëŠ¥]

# 4ë‹¨ê³„: ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ì¤€ë¹„
python scripts/prepare_realtime_system.py [ë„ë©”ì¸] [ê¸°ëŠ¥]
```

### 2. ê¸°ì¡´ ë„ë©”ì¸ í™•ì¥ ì‹œ
```bash
# 1ë‹¨ê³„: ê¸°ì¡´ êµ¬ì¡° ê²€ì¦
python scripts/validate_pipeline.py [ë„ë©”ì¸] [ê¸°ëŠ¥]

# 2ë‹¨ê³„: ìƒˆë¡œìš´ ë°ì´í„° ì¶”ê°€
python scripts/add_new_data.py [ë„ë©”ì¸] [ê¸°ëŠ¥] --source [ë°ì´í„°ì†ŒìŠ¤]

# 3ë‹¨ê³„: íŒŒì´í”„ë¼ì¸ ì¬ì‹¤í–‰ (í•„ìš”í•œ ë‹¨ê³„ë¶€í„°)
python scripts/run_pipeline.py [ë„ë©”ì¸] [ê¸°ëŠ¥] --from-stage [ë‹¨ê³„ë²ˆí˜¸]
```

### 3. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ê°œì„ 
```bash
# ì„±ëŠ¥ ì¸¡ì •
python scripts/measure_performance.py [ë„ë©”ì¸] [ê¸°ëŠ¥]

# ì§€ì†ì  í•™ìŠµ
python scripts/continuous_learning.py [ë„ë©”ì¸] [ê¸°ëŠ¥]

# ëª¨ë¸ ì—…ë°ì´íŠ¸
python scripts/update_models.py [ë„ë©”ì¸] [ê¸°ëŠ¥]
```

## ğŸš« í•„ìˆ˜ ì¤€ìˆ˜ ì‚¬í•­

### 1. íŒŒì´í”„ë¼ì¸ ìˆœì„œ ì—„ê²© ì¤€ìˆ˜
```python
# âŒ ì ˆëŒ€ ê¸ˆì§€: ë‹¨ê³„ ê±´ë„ˆë›°ê¸°
# 2ë‹¨ê³„ ì™„ë£Œ ì—†ì´ 3ë‹¨ê³„ ì‹¤í–‰ ê¸ˆì§€

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ìˆœì°¨ ì‹¤í–‰
def execute_pipeline():
    stages = ['1_raw', '2_extracted', '3_clustered', '4_labeled', '5_embeddings']
    for i, stage in enumerate(stages):
        if not validate_previous_stage(stages[:i]):
            raise PipelineError(f"ì´ì „ ë‹¨ê³„ ë¯¸ì™„ë£Œ: {stage}")
        execute_stage(stage)
```

### 2. ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦ í•„ìˆ˜
```python
# ê° ë‹¨ê³„ ì‹¤í–‰ ì „ ë°˜ë“œì‹œ ê²€ì¦
def validate_stage_prerequisites(stage: str, domain: str, feature: str):
    """ë‹¨ê³„ ì‹¤í–‰ ì „ ì „ì œì¡°ê±´ ê²€ì¦"""
    
    validators = {
        '2_extracted': validate_raw_data_exists,
        '3_clustered': validate_features_extracted,
        '4_labeled': validate_clusters_created,
        '5_embeddings': validate_labels_assigned,
        '6_realtime': validate_embeddings_generated
    }
    
    validator = validators.get(stage)
    if validator and not validator(domain, feature):
        raise PipelineError(f"{stage} ì „ì œì¡°ê±´ ë¯¸ì¶©ì¡±")
```

### 3. ì§„í–‰ ìƒí™© ì¶”ì  í•„ìˆ˜
```python
# ëª¨ë“  ë‹¨ê³„ì—ì„œ ì§„í–‰ ìƒí™© ê¸°ë¡
def track_pipeline_progress(domain: str, feature: str, stage: str, status: str):
    """íŒŒì´í”„ë¼ì¸ ì§„í–‰ ìƒí™© ì¶”ì """
    
    progress_file = f"data/domains/{domain}/{feature}/pipeline_progress.json"
    
    progress = load_progress(progress_file)
    progress[stage] = {
        'status': status,  # 'started', 'completed', 'failed'
        'timestamp': datetime.now().isoformat(),
        'duration': calculate_duration(),
        'output_files': list_output_files(stage)
    }
    
    save_progress(progress_file, progress)
```

### 4. ì—ëŸ¬ ë³µêµ¬ ì „ëµ í•„ìˆ˜
```python
# ê° ë‹¨ê³„ë³„ ë¡¤ë°± ê¸°ëŠ¥ êµ¬í˜„
def rollback_stage(domain: str, feature: str, stage: str):
    """ë‹¨ê³„ë³„ ë¡¤ë°± ê¸°ëŠ¥"""
    
    rollback_strategies = {
        '2_extracted': rollback_feature_extraction,
        '3_clustered': rollback_clustering,
        '4_labeled': rollback_labeling,
        '5_embeddings': rollback_embedding_generation
    }
    
    strategy = rollback_strategies.get(stage)
    if strategy:
        strategy(domain, feature)
        update_progress_status(domain, feature, stage, 'rolled_back')
```

## ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ìë™í™”

### 1. ê° ë‹¨ê³„ë³„ ì„±ëŠ¥ ì¸¡ì •
```python
# ìë™ ì„±ëŠ¥ ì¸¡ì • ë° ê¸°ë¡
class PipelinePerformanceMonitor:
    def __init__(self, domain: str, feature: str):
        self.domain = domain
        self.feature = feature
        self.metrics = {}
    
    def measure_stage_performance(self, stage: str, func, *args, **kwargs):
        """ë‹¨ê³„ë³„ ì„±ëŠ¥ ì¸¡ì •"""
        start_time = time.time()
        memory_before = psutil.virtual_memory().used
        
        try:
            result = func(*args, **kwargs)
            
            # ì„±ëŠ¥ ë©”íŠ¸ë¦­ ê³„ì‚°
            duration = time.time() - start_time
            memory_used = psutil.virtual_memory().used - memory_before
            
            self.metrics[stage] = {
                'duration_seconds': duration,
                'memory_used_mb': memory_used / (1024 * 1024),
                'success': True,
                'timestamp': datetime.now().isoformat()
            }
            
            return result
            
        except Exception as e:
            self.metrics[stage] = {
                'duration_seconds': time.time() - start_time,
                'success': False,
                'error': str(e),
                'timestamp': datetime.now().isoformat()
            }
            raise
        
        finally:
            self.save_metrics()
```

## ğŸ¯ ì ìš© ìš°ì„ ìˆœìœ„

### 1ë‹¨ê³„: í•„ìˆ˜ êµ¬í˜„ (ì¦‰ì‹œ)
- [x] `scripts/create_domain.py` êµ¬í˜„
- [x] `scripts/run_pipeline.py` êµ¬í˜„  
- [x] `scripts/validate_pipeline.py` êµ¬í˜„
- [x] `scripts/manage_traceability.py` êµ¬í˜„ (NEW!)
- [x] `scripts/validate_filenames.py` êµ¬í˜„ (NEW!)
- [x] 9ë‹¨ê³„ í´ë” êµ¬ì¡° í‘œì¤€í™”
- [x] íŒŒì¼ëª… íŒ¨í„´ ê·œì¹™ ì ìš© (NEW!)

### 2ë‹¨ê³„: ìë™í™” í™•ì¥ (1ì£¼ì¼ ë‚´)
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ìë™í™”
- [ ] Git í›… í†µí•©
- [ ] ì—ëŸ¬ ë³µêµ¬ ì‹œìŠ¤í…œ
- [ ] ì§„í–‰ ìƒí™© ì¶”ì 
- [ ] ì¶”ì ì„± ê²€ì¦ ìë™í™” (NEW!)

### 3ë‹¨ê³„: ê³ ê¸‰ ê¸°ëŠ¥ (2ì£¼ì¼ ë‚´)
- [ ] ì§€ì†ì  í•™ìŠµ ìë™í™”
- [ ] í’ˆì§ˆ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- [ ] ìë™ ëª¨ë¸ ì—…ë°ì´íŠ¸
- [ ] ëŒ€ì‹œë³´ë“œ í†µí•©
- [ ] ë°ì´í„° ê³„ë³´ ì‹œê°í™” (NEW!)

## âš ï¸ ì¤‘ìš” ê·œì¹™

### ëª¨ë“  ê°œë°œìê°€ ì¤€ìˆ˜í•´ì•¼ í•  ì‚¬í•­
1. **ìƒˆë¡œìš´ ë„ë©”ì¸/ê¸°ëŠ¥ ê°œë°œ ì‹œ ë°˜ë“œì‹œ `create_domain.py` ì‚¬ìš©**
2. **íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì‹œ ë°˜ë“œì‹œ `run_pipeline.py` ì‚¬ìš©**
3. **ìˆ˜ë™ í´ë” ìƒì„± ì ˆëŒ€ ê¸ˆì§€** (ìë™í™” ìŠ¤í¬ë¦½íŠ¸ë§Œ ì‚¬ìš©)
4. **ë‹¨ê³„ ê±´ë„ˆë›°ê¸° ì ˆëŒ€ ê¸ˆì§€** (ìˆœì°¨ ì‹¤í–‰ í•„ìˆ˜)
5. **ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦ ìƒëµ ê¸ˆì§€** (ê° ë‹¨ê³„ë³„ ê²€ì¦ í•„ìˆ˜)
6. **íŒŒì¼ëª… íŒ¨í„´ ì¤€ìˆ˜ í•„ìˆ˜** (ì¶”ì ì„± ë³´ì¥) â­ NEW!
7. **ì¶”ì ì„± ì •ë³´ ì—…ë°ì´íŠ¸ í•„ìˆ˜** (ëª¨ë“  ë‹¨ê³„ì—ì„œ) â­ NEW!

### ì½”ë“œ ë¦¬ë·° ì‹œ í™•ì¸ ì‚¬í•­
1. 9ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ ìˆœì„œ ì¤€ìˆ˜ ì—¬ë¶€
2. ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© ì—¬ë¶€
3. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì½”ë“œ í¬í•¨ ì—¬ë¶€
4. ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡¤ë°± ë¡œì§ í¬í•¨ ì—¬ë¶€
5. ì§„í–‰ ìƒí™© ì¶”ì  ì½”ë“œ í¬í•¨ ì—¬ë¶€

ì´ ê·œì¹™ì„ ì¤€ìˆ˜í•˜ë©´ ëª¨ë“  ë¹„ì „ ì‹œìŠ¤í…œ ë„ë©”ì¸ì—ì„œ ì¼ê´€ëœ 9ë‹¨ê³„ ë°ì´í„° ìƒëª…ì£¼ê¸°ë¥¼ ìë™ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ§ª í…ŒìŠ¤íŠ¸ íŒŒì¼ ê´€ë¦¬ ê·œì¹™ (NEW!)

### í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜ ê·œì¹™ (ì—„ê²©íˆ ì¤€ìˆ˜)
```python
TEST_FILE_LOCATION_RULES = {
    'comprehensive_tests': {
        'location': 'tests/',
        'purpose': 'ì „ì²´ í”„ë¡œì íŠ¸ í†µí•© í…ŒìŠ¤íŠ¸',
        'scope': 'ë„ë©”ì¸ ê°„ ì—°ë™, ì „ì²´ íŒŒì´í”„ë¼ì¸, ì„±ëŠ¥ í…ŒìŠ¤íŠ¸',
        'naming': 'test_{domain}_{feature}.py',
        'examples': [
            'tests/test_face_recognition_pipeline.py',
            'tests/test_defect_detection_integration.py',
            'tests/test_cross_domain_compatibility.py'
        ]
    },
    'domain_development_tests': {
        'location': 'domains/{domain}/{feature}/tests/',
        'purpose': 'ë„ë©”ì¸ ê°œë°œ ì¤‘ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸',
        'scope': 'ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, ëª¨ë¸ í…ŒìŠ¤íŠ¸, ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸',
        'naming': 'test_{component}.py',
        'examples': [
            'domains/humanoid/face_recognition/tests/test_model.py',
            'domains/humanoid/face_recognition/tests/test_detection.py',
            'domains/humanoid/face_recognition/tests/test_recognition.py'
        ]
    },
    'pipeline_step_tests': {
        'location': 'domains/{domain}/{feature}/pipeline/tests/',
        'purpose': 'íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸',
        'scope': 'ê° ë‹¨ê³„ë³„ ê¸°ëŠ¥, ë°ì´í„° ì²˜ë¦¬, ëª¨ë¸ ì„±ëŠ¥',
        'naming': 'test_step_{step_number}_{step_name}.py',
        'examples': [
            'domains/humanoid/face_recognition/pipeline/tests/test_step_1_capture.py',
            'domains/humanoid/face_recognition/pipeline/tests/test_step_2_extract.py',
            'domains/humanoid/face_recognition/pipeline/tests/test_step_3_cluster.py'
        ]
    }
}
```

### í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€ ê·œì¹™
```python
FORBIDDEN_TEST_LOCATIONS = [
    # âŒ ì ˆëŒ€ ê¸ˆì§€: ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— í…ŒìŠ¤íŠ¸ íŒŒì¼
    'test_*.py',                    # ë£¨íŠ¸ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€
    
    # âŒ ì ˆëŒ€ ê¸ˆì§€: ë„ë©”ì¸ ë£¨íŠ¸ì— í…ŒìŠ¤íŠ¸ íŒŒì¼
    'domains/humanoid/test_*.py',   # ë„ë©”ì¸ ë£¨íŠ¸ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€
    'domains/factory/test_*.py',    # ë„ë©”ì¸ ë£¨íŠ¸ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€
    
    # âŒ ì ˆëŒ€ ê¸ˆì§€: ê¸°ëŠ¥ í´ë” ë£¨íŠ¸ì— í…ŒìŠ¤íŠ¸ íŒŒì¼
    'domains/humanoid/face_recognition/test_*.py',  # ê¸°ëŠ¥ ë£¨íŠ¸ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€
    
    # âŒ ì ˆëŒ€ ê¸ˆì§€: ê³µí†µ ëª¨ë“ˆì— í…ŒìŠ¤íŠ¸ íŒŒì¼
    'common/test_*.py',             # common í´ë”ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€
    'shared/test_*.py',             # shared í´ë”ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€
    
    # âŒ ì ˆëŒ€ ê¸ˆì§€: ìŠ¤í¬ë¦½íŠ¸ í´ë”ì— í…ŒìŠ¤íŠ¸ íŒŒì¼
    'scripts/test_*.py',            # scripts í´ë”ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê¸ˆì§€
]
```

### í…ŒìŠ¤íŠ¸ íŒŒì¼ ë„¤ì´ë° ê·œì¹™
```python
TEST_NAMING_CONVENTIONS = {
    'comprehensive_tests': {
        'pattern': 'test_{domain}_{feature}_{aspect}.py',
        'examples': [
            'test_humanoid_face_recognition_pipeline.py',
            'test_humanoid_face_recognition_performance.py',
            'test_factory_defect_detection_integration.py'
        ]
    },
    'domain_tests': {
        'pattern': 'test_{component}.py',
        'examples': [
            'test_model.py',
            'test_detection.py',
            'test_recognition.py',
            'test_preprocessing.py'
        ]
    },
    'pipeline_tests': {
        'pattern': 'test_step_{number}_{name}.py',
        'examples': [
            'test_step_1_capture.py',
            'test_step_2_extract.py',
            'test_step_3_cluster.py',
            'test_step_4_label.py',
            'test_step_5_embed.py'
        ]
    }
}
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê·œì¹™
```python
TEST_EXECUTION_RULES = {
    'development_workflow': {
        'description': 'ê°œë°œ ì¤‘ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸',
        'location': 'domains/{domain}/{feature}/tests/',
        'command': 'python -m pytest domains/{domain}/{feature}/tests/ -v',
        'purpose': 'ê°œë°œ ì¤‘ ê¸°ëŠ¥ ê²€ì¦'
    },
    'integration_testing': {
        'description': 'í†µí•© í…ŒìŠ¤íŠ¸',
        'location': 'tests/',
        'command': 'python -m pytest tests/ -v',
        'purpose': 'ì „ì²´ ì‹œìŠ¤í…œ ê²€ì¦'
    },
    'pipeline_testing': {
        'description': 'íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸',
        'location': 'domains/{domain}/{feature}/pipeline/tests/',
        'command': 'python -m pytest domains/{domain}/{feature}/pipeline/tests/ -v',
        'purpose': 'íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ë³„ ê²€ì¦'
    }
}
```

### í…ŒìŠ¤íŠ¸ íŒŒì¼ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
```python
def validate_test_file_locations():
    """í…ŒìŠ¤íŠ¸ íŒŒì¼ ìœ„ì¹˜ ê·œì¹™ ê²€ì¦"""
    violations = []
    
    # ê¸ˆì§€ëœ ìœ„ì¹˜ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
    for forbidden_pattern in FORBIDDEN_TEST_LOCATIONS:
        test_files = Path('.').glob(forbidden_pattern)
        for test_file in test_files:
            violations.append(f"ê¸ˆì§€ëœ ìœ„ì¹˜ì— í…ŒìŠ¤íŠ¸ íŒŒì¼: {test_file}")
    
    # ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
    expected_locations = [
        'tests/',
        'domains/*/tests/',
        'domains/*/*/tests/',
        'domains/*/*/pipeline/tests/'
    ]
    
    for pattern in expected_locations:
        if not list(Path('.').glob(pattern)):
            violations.append(f"í•„ìˆ˜ í…ŒìŠ¤íŠ¸ í´ë” ëˆ„ë½: {pattern}")
    
    return violations
```

### í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê°€ì´ë“œ
```python
def create_test_file(domain: str, feature: str, test_type: str, component: str = None):
    """í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± ê°€ì´ë“œ"""
    
    if test_type == 'comprehensive':
        # í†µí•© í…ŒìŠ¤íŠ¸
        test_path = Path('tests') / f'test_{domain}_{feature}_{component}.py'
    elif test_type == 'domain':
        # ë„ë©”ì¸ í…ŒìŠ¤íŠ¸
        test_path = Path('domains') / domain / feature / 'tests' / f'test_{component}.py'
    elif test_type == 'pipeline':
        # íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸
        test_path = Path('domains') / domain / feature / 'pipeline' / 'tests' / f'test_step_{component}.py'
    else:
        raise ValueError(f"Unknown test type: {test_type}")
    
    # í…ŒìŠ¤íŠ¸ í´ë” ìƒì„±
    test_path.parent.mkdir(parents=True, exist_ok=True)
    
    # í…ŒìŠ¤íŠ¸ íŒŒì¼ í…œí”Œë¦¿ ìƒì„±
    create_test_template(test_path, test_type, domain, feature, component)
    
    return test_path
```

## âš ï¸ í…ŒìŠ¤íŠ¸ ê´€ë ¨ ì¤‘ìš” ê·œì¹™

### ëª¨ë“  ê°œë°œìê°€ ì¤€ìˆ˜í•´ì•¼ í•  ì‚¬í•­
1. **í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ ë°˜ë“œì‹œ ì§€ì •ëœ ìœ„ì¹˜ì—ë§Œ ìƒì„±**
2. **ë„ë©”ì¸ ê°œë°œ ì¤‘ì—ëŠ” `domains/{domain}/{feature}/tests/` ì‚¬ìš©**
3. **í†µí•© í…ŒìŠ¤íŠ¸ëŠ” `tests/` í´ë”ì—ë§Œ ìƒì„±**
4. **íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ëŠ” `pipeline/tests/` í´ë”ì—ë§Œ ìƒì„±**
5. **í…ŒìŠ¤íŠ¸ íŒŒì¼ ë„¤ì´ë° ê·œì¹™ ì—„ê²© ì¤€ìˆ˜**
6. **í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ ìœ„ì¹˜ ê·œì¹™ ê²€ì¦ í•„ìˆ˜**

### ì½”ë“œ ë¦¬ë·° ì‹œ í™•ì¸ ì‚¬í•­
1. í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ìˆëŠ”ì§€ í™•ì¸
2. í…ŒìŠ¤íŠ¸ íŒŒì¼ ë„¤ì´ë°ì´ ê·œì¹™ì— ë§ëŠ”ì§€ í™•ì¸
3. ê¸ˆì§€ëœ ìœ„ì¹˜ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ì´ ì—†ëŠ”ì§€ í™•ì¸
4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì´ ì •ìƒì ìœ¼ë¡œ ë˜ëŠ”ì§€ í™•ì¸










