# ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡° ê·œì¹™

## ğŸ“ í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
vision_system/
â”œâ”€â”€ domains/                   # ë„ë©”ì¸ë³„ ë…ë¦½ ê°œë°œ
â”‚   â””â”€â”€ face_recognition/      # ì–¼êµ´ì¸ì‹ ë„ë©”ì¸ (í˜„ì¬ ê°œë°œ ì¤‘)
â”‚       â”œâ”€â”€ core/              # ë„ë©”ì¸ í•µì‹¬ ë¡œì§
â”‚       â”œâ”€â”€ infrastructure/    # ì¸í”„ë¼ ê³„ì¸µ
â”‚       â”œâ”€â”€ interfaces/        # API ì¸í„°í˜ì´ìŠ¤
â”‚       â””â”€â”€ runners/           # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ shared/                    # ê³µí†µ ëª¨ë“ˆ
â”‚   â””â”€â”€ vision_core/           # ë¹„ì „ ì•Œê³ ë¦¬ì¦˜ ê³µí†µ ê¸°ëŠ¥
â”œâ”€â”€ common/                    # ë²”ìš© ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ config/                    # ì„¤ì • íŒŒì¼
â”œâ”€â”€ models/                    # ëª¨ë¸ ì €ì¥ì†Œ
â”‚   â””â”€â”€ weights/               # ëª¨ë¸ ê°€ì¤‘ì¹˜
â”œâ”€â”€ datasets/                  # í•™ìŠµ ë°ì´í„°
â”œâ”€â”€ data/                      # ëŸ°íƒ€ì„ ë°ì´í„°
â”‚   â”œâ”€â”€ runtime/               # ëŸ°íƒ€ì„ ì„ì‹œ ë°ì´í„°
â”‚   â””â”€â”€ domains/               # ë„ë©”ì¸ë³„ ë°ì´í„°
â””â”€â”€ scripts/                   # ê°œë°œ ë„êµ¬ ìŠ¤í¬ë¦½íŠ¸
```

## ğŸ”— ê³„ì¸µë³„ ì˜ì¡´ì„± ê·œì¹™

### ì˜ì¡´ì„± ë°©í–¥ (ìœ„ì—ì„œ ì•„ë˜ë¡œë§Œ í—ˆìš©)
```
Level 4: domains/              # ë„ë©”ì¸ ê³„ì¸µ
    â†“
Level 3: models/               # ëª¨ë¸ ê³„ì¸µ
    â†“
Level 2: shared/               # ê³µìœ  ëª¨ë“ˆ ê³„ì¸µ
    â†“
Level 1: common/, config/      # ê¸°ë°˜ ê³„ì¸µ
```

### ê¸ˆì§€ ì‚¬í•­
```python
# âŒ ì ˆëŒ€ ê¸ˆì§€: ë„ë©”ì¸ ê°„ ì§ì ‘ import
from domains.face_recognition import something
# ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œ ì‚¬ìš© ì‹œ

# âŒ ì ˆëŒ€ ê¸ˆì§€: í•˜ìœ„ ê³„ì¸µì—ì„œ ìƒìœ„ ê³„ì¸µ import
from domains.face_recognition import something
# common/ í´ë”ì—ì„œ ì‚¬ìš© ì‹œ

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ê³µìœ  ëª¨ë“ˆì„ í†µí•œ í†µì‹ 
from shared.vision_core import FaceDetector
```

## ğŸ“‚ ë„ë©”ì¸ êµ¬ì¡° (DDD íŒ¨í„´)

### face_recognition ë„ë©”ì¸ ì˜ˆì‹œ
```
domains/face_recognition/
â”œâ”€â”€ core/                      # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ entities/              # ì—”í‹°í‹°
â”‚   â”œâ”€â”€ services/              # ë„ë©”ì¸ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ repositories/          # ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤
â”‚   â””â”€â”€ value_objects/         # ê°’ ê°ì²´
â”œâ”€â”€ infrastructure/            # ì¸í”„ë¼ êµ¬í˜„
â”‚   â”œâ”€â”€ models/                # AI ëª¨ë¸ êµ¬í˜„
â”‚   â”œâ”€â”€ storage/               # ì €ì¥ì†Œ êµ¬í˜„
â”‚   â””â”€â”€ detection_engines/     # ê²€ì¶œ ì—”ì§„
â”œâ”€â”€ interfaces/                # ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ api/                   # REST API
â”‚   â””â”€â”€ cli/                   # CLI ì¸í„°í˜ì´ìŠ¤
â””â”€â”€ runners/                   # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
    â”œâ”€â”€ recognition/           # ì¸ì‹ ê´€ë ¨
    â”œâ”€â”€ data_collection/       # ë°ì´í„° ìˆ˜ì§‘
    â””â”€â”€ demos/                 # ë°ëª¨ ìŠ¤í¬ë¦½íŠ¸
```

## ğŸ—‚ï¸ íŒŒì¼ ì €ì¥ ìœ„ì¹˜ ê·œì¹™

### ë°ì´í„° íŒŒì¼ ìœ„ì¹˜
```python
DATA_LOCATIONS = {
    'ëŸ°íƒ€ì„ ì„ì‹œ ë°ì´í„°': 'data/runtime/temp/',
    'ë¡œê·¸ íŒŒì¼': 'data/runtime/logs/',
    'ì²˜ë¦¬ ê²°ê³¼': 'data/runtime/output/',
    'ë„ë©”ì¸ ë°ì´í„°': 'data/domains/{domain_name}/',
    'í•™ìŠµ ë°ì´í„°': 'datasets/{domain_name}/',
    'ëª¨ë¸ ê°€ì¤‘ì¹˜': 'models/weights/',
    'ì„¤ì • íŒŒì¼': 'config/'
}
```

### ê¸ˆì§€ ìœ„ì¹˜
```python
# âŒ ì ˆëŒ€ ê¸ˆì§€: ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ì„ì‹œ íŒŒì¼ ìƒì„±
FORBIDDEN_ROOT_FILES = [
    "*.log",           # ë¡œê·¸ íŒŒì¼
    "*.tmp",           # ì„ì‹œ íŒŒì¼
    "output_*",        # ê²°ê³¼ë¬¼
    "temp_*",          # ì„ì‹œ íŒŒì¼
    "debug_*",         # ë””ë²„ê·¸ íŒŒì¼
]
```

## ğŸ“ íŒŒì¼ ë„¤ì´ë° ê·œì¹™

### ë„ë©”ì¸ ë‚´ íŒŒì¼ ë„¤ì´ë°
```python
# ì—”í‹°í‹°
face.py
person.py

# ì„œë¹„ìŠ¤
face_detection_service.py
face_recognition_service.py

# ì €ì¥ì†Œ
face_repository.py
person_repository.py

# ëª¨ë¸
retinaface_model.py
arcface_model.py

# ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
run_face_recognition.py
run_demo.py
```

### ëª¨ë¸ ê°€ì¤‘ì¹˜ ë„¤ì´ë°
```python
# íŒ¨í„´: {task}_{architecture}_{dataset}_{date}.{ext}
face_detection_retinaface_widerface_20250628.pt
face_recognition_arcface_glint360k_20250628.onnx
```

## ğŸ”§ í•„ìˆ˜ í´ë” ë° íŒŒì¼

### ëª¨ë“  Python íŒ¨í‚¤ì§€ í´ë”
```
required_files = [
    '__init__.py',     # í•„ìˆ˜
    'README.md'        # ê¶Œì¥
]
```

### ë„ë©”ì¸ í´ë” í•„ìˆ˜ êµ¬ì¡°
```
domains/{domain_name}/
â”œâ”€â”€ __init__.py           # í•„ìˆ˜
â”œâ”€â”€ README.md             # í•„ìˆ˜
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ __init__.py       # í•„ìˆ˜
â”‚   â””â”€â”€ README.md         # ê¶Œì¥
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ __init__.py       # í•„ìˆ˜
â”‚   â””â”€â”€ README.md         # ê¶Œì¥
â”œâ”€â”€ interfaces/
â”‚   â”œâ”€â”€ __init__.py       # í•„ìˆ˜
â”‚   â””â”€â”€ README.md         # ê¶Œì¥
â””â”€â”€ runners/
    â”œâ”€â”€ __init__.py       # í•„ìˆ˜
    â””â”€â”€ README.md         # ê¶Œì¥
```

## ğŸ“Š í´ë” ìš©ë„ ëª…í™•í™”

### datasets/ vs data/ êµ¬ë¶„
```python
# datasets/ - í•™ìŠµ ì „ìš© (ê³ ì • ë°ì´í„°)
datasets/face_recognition/
â”œâ”€â”€ raw/                  # ì›ë³¸ í•™ìŠµ ë°ì´í„°
â”œâ”€â”€ processed/            # ì „ì²˜ë¦¬ëœ ë°ì´í„°
â”œâ”€â”€ annotations/          # ë¼ë²¨ë§ ë°ì´í„°
â””â”€â”€ splits/               # train/val/test ë¶„í• 

# data/ - ëŸ°íƒ€ì„ ì „ìš© (ë™ì  ë°ì´í„°)
data/
â”œâ”€â”€ runtime/              # ì‹œìŠ¤í…œ ëŸ°íƒ€ì„ ë°ì´í„°
â”‚   â”œâ”€â”€ temp/             # ì„ì‹œ íŒŒì¼ (ìë™ ì •ë¦¬)
â”‚   â”œâ”€â”€ logs/             # ë¡œê·¸ íŒŒì¼
â”‚   â””â”€â”€ output/           # ê²°ê³¼ë¬¼
â””â”€â”€ domains/              # ë„ë©”ì¸ë³„ ë°ì´í„°
    â””â”€â”€ face_recognition/ # ì–¼êµ´ì¸ì‹ ë„ë©”ì¸ ë°ì´í„°
```

## ğŸš« êµ¬ì¡° ìœ„ë°˜ ì‚¬ë¡€

### 1. ì˜ì¡´ì„± ìˆœí™˜
```python
# âŒ ê¸ˆì§€: ìˆœí™˜ ì˜ì¡´ì„±
# common/utils.py
from domains.face_recognition.core.services import FaceService

# domains/face_recognition/core/services.py  
from common.utils import some_function
```

### 2. ì˜ëª»ëœ íŒŒì¼ ìœ„ì¹˜
```python
# âŒ ê¸ˆì§€: ì„ì‹œ íŒŒì¼ì„ ì˜ëª»ëœ ìœ„ì¹˜ì— ì €ì¥
output_file = "captured_frame.jpg"  # ë£¨íŠ¸ì— ì €ì¥

# âœ… ì˜¬ë°”ë¥¸ ìœ„ì¹˜
output_file = "data/runtime/output/captured_frame.jpg"
```

### 3. í•˜ë“œì½”ë”©ëœ ê²½ë¡œ
```python
# âŒ ê¸ˆì§€: í•˜ë“œì½”ë”©ëœ ê²½ë¡œ
model_path = "C:/Users/user/models/face_detection.pt"

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
model_path = "models/weights/face_detection_retinaface_widerface_20250628.pt"
```

## ğŸ“ êµ¬ì¡° ê²€ì¦ ë°©ë²•

### ê¸°ë³¸ ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
```python
def validate_basic_structure():
    """ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡° ê²€ì¦"""
    required_folders = [
        'domains', 'shared', 'common', 'config', 
        'models/weights', 'data/runtime', 'scripts'
    ]
    
    for folder in required_folders:
        if not Path(folder).exists():
            print(f"âŒ Missing required folder: {folder}")
            return False
    
    print("âœ… Basic structure is valid")
    return True
```

---

**ì ìš© ìš°ì„ ìˆœìœ„**:
1. ë°ì´í„° íŒŒì¼ ìœ„ì¹˜ ì¤€ìˆ˜ (í•„ìˆ˜)
2. ì˜ì¡´ì„± ë°©í–¥ ì¤€ìˆ˜ (í•„ìˆ˜)
3. ë„ë©”ì¸ êµ¬ì¡° ì¤€ìˆ˜ (ê¶Œì¥)
4. íŒŒì¼ ë„¤ì´ë° ì¤€ìˆ˜ (ê¶Œì¥) 