# ğŸ¯ cí‚¤ ìˆ˜ë™ ìº¡ì²˜ ì™„ì „ í”Œë¡œìš° ê°€ì´ë“œ

## ğŸ¤” **ì‚¬ìš©ì ì§ˆë¬¸**
> "ìˆ˜ë™ì—ì„œ cë¡œ ì–¼êµ´ì¸ì‹ëœ ì‚¬ì§„ì„ ìº¡ì³í•´ì„œ ì´ë¦„ê¹Œì§€ ì§€ì •í•œ ê²½ìš°ëŠ” ë‹¤ìŒ ë£¨íŠ¸ê°€ ì–´ë–»ê²Œ ë˜ëŠ”ê±°ì§€? ì¢€ ì• ë§¤í•´ì§€ëŠ”ê±° ê°™ì€ë°?"

## âœ… **ëª…í™•í•œ ë‹µë³€**

### **cí‚¤ ìº¡ì²˜ì˜ íŠ¹ë³„í•œ íŠ¹ì§•**
cí‚¤ ìº¡ì²˜ëŠ” **ë‹¤ë¥¸ ë°©ë²•ë“¤ê³¼ ë‹¤ë¥´ê²Œ** ì–¼êµ´ ê²€ì¶œê³¼ ì´ë¦„ ì§€ì •ì´ **ì¦‰ì‹œ** ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

## ğŸ”„ **cí‚¤ í”Œë¡œìš° vs ë‹¤ë¥¸ ë°©ë²•ë“¤**

### **1ï¸âƒ£ cí‚¤ ìˆ˜ë™ ìº¡ì²˜ (ì¦‰ì‹œ ì²˜ë¦¬)**
```
ğŸ“¹ ì¹´ë©”ë¼ í™”ë©´ì—ì„œ cí‚¤ ëˆ„ë¦„
         â†“
ğŸ” ì‹¤ì‹œê°„ ì–¼êµ´ ê²€ì¶œ (ì¦‰ì‹œ)
         â†“
âœ‚ï¸ ì–¼êµ´ ì˜ì—­ë§Œ í¬ë¡­ (ì¦‰ì‹œ)
         â†“
ğŸ·ï¸ ì´ë¦„ ì…ë ¥ í”„ë¡¬í”„íŠ¸ (ì¦‰ì‹œ)
         â†“
ğŸ“‚ data/domains/face_recognition/raw_input/manual/
   â””â”€â”€ {ì´ë¦„}_{timestamp}_manual.jpg
         â†“
âœ… ë°”ë¡œ í’ˆì§ˆ ê²€ì¦ â†’ processed/final/
```

### **2ï¸âƒ£ sí‚¤ í”„ë ˆì„ ì €ì¥ (ì§€ì—° ì²˜ë¦¬)**
```
ğŸ“¹ ì¹´ë©”ë¼ í™”ë©´ì—ì„œ sí‚¤ ëˆ„ë¦„
         â†“
ğŸ“¸ ì „ì²´ í”„ë ˆì„ ì €ì¥ (ì¦‰ì‹œ)
         â†“
ğŸ“‚ data/domains/face_recognition/raw_input/captured/
   â””â”€â”€ frame_{timestamp}.jpg
         â†“
ğŸ” ë‚˜ì¤‘ì— ì–¼êµ´ ê²€ì¶œ â†’ detected_faces/from_captured/
         â†“
ğŸ·ï¸ ë‚˜ì¤‘ì— ì´ë¦„ ì…ë ¥ â†’ staging/named/
         â†“
âœ… í’ˆì§ˆ ê²€ì¦ â†’ processed/final/
```

## ğŸ“Š **cí‚¤ ìº¡ì²˜ì˜ ì •í™•í•œ ì €ì¥ ìœ„ì¹˜**

### **ì¦‰ì‹œ ì €ì¥ ìœ„ì¹˜**
```
ğŸ“‚ data/domains/face_recognition/raw_input/manual/
â”œâ”€â”€ í™ê¸¸ë™_20250629_214530_manual.jpg    # ì–¼êµ´ë§Œ í¬ë¡­ëœ ì´ë¯¸ì§€
â”œâ”€â”€ ê¹€ì² ìˆ˜_20250629_214545_manual.jpg
â””â”€â”€ ì´ì˜í¬_20250629_214600_manual.jpg
```

### **ë©”íƒ€ë°ì´í„° ì €ì¥**
```json
// data/domains/face_recognition/raw_input/manual/í™ê¸¸ë™_20250629_214530_manual.json
{
  "person_name": "í™ê¸¸ë™",
  "capture_method": "manual_c_key",
  "timestamp": "2025-06-29T21:45:30",
  "face_bbox": [x, y, w, h],
  "confidence": 0.95,
  "camera_id": "camera_0",
  "immediate_processing": true,
  "status": "ready_for_final_processing"
}
```

## ğŸš€ **cí‚¤ ìº¡ì²˜ í›„ ì¦‰ì‹œ ì²˜ë¦¬**

### **ìë™ íŒŒì´í”„ë¼ì¸**
```
ğŸ“‚ raw_input/manual/ (cí‚¤ë¡œ ì €ì¥ë¨)
         â†“
ğŸ” í’ˆì§ˆ ê²€ì¦ (ìë™)
   â”œâ”€â”€ âœ… í’ˆì§ˆ í†µê³¼ â†’ processed/final/
   â””â”€â”€ âŒ í’ˆì§ˆ ì‹¤íŒ¨ â†’ staging/rejected/
         â†“
ğŸ§  ì„ë² ë”© ì¶”ì¶œ (ìë™)
         â†“
ğŸ“Š domains/face_recognition/data/storage/ ë“±ë¡ (ìë™)
```

### **ìµœì¢… ì €ì¥ í˜•íƒœ**
```
ğŸ“‚ data/domains/face_recognition/processed/final/
â””â”€â”€ í™ê¸¸ë™_20250629_214530_final.json
{
  "face_id": "uuid-c-key-001",
  "person_name": "í™ê¸¸ë™",
  "source_method": "manual_c_key",
  "embedding": [0.1, 0.2, 0.3, ...],
  "quality_score": 0.92,
  "original_path": "raw_input/manual/í™ê¸¸ë™_20250629_214530_manual.jpg",
  "processed_at": "2025-06-29T21:45:35"
}
```

## ğŸ”„ **ë‹¤ë¥¸ ë°©ë²•ë“¤ê³¼ì˜ ë¹„êµ**

| ë°©ë²• | ì €ì¥ ìœ„ì¹˜ | ì´ë¦„ ì§€ì • ì‹œì  | ì²˜ë¦¬ ì‹œì  |
|------|-----------|----------------|-----------|
| **cí‚¤ ìº¡ì²˜** | `raw_input/manual/` | ì¦‰ì‹œ | ì¦‰ì‹œ |
| **sí‚¤ ì €ì¥** | `raw_input/captured/` | ë‚˜ì¤‘ì— | ë‚˜ì¤‘ì— |
| **íŒŒì¼ ì—…ë¡œë“œ** | `raw_input/uploads/` | ë‚˜ì¤‘ì— | ë‚˜ì¤‘ì— |
| **ìë™ ìˆ˜ì§‘** | `detected_faces/auto_collected/` | ë‚˜ì¤‘ì— | ë‚˜ì¤‘ì— |

## âœ¨ **cí‚¤ ìº¡ì²˜ì˜ ì¥ì **

### **1. ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥**
- ìº¡ì²˜ â†’ ì´ë¦„ ì§€ì • â†’ ë“±ë¡ì´ í•œ ë²ˆì— ì™„ë£Œ
- ë‹¤ë¥¸ ë°©ë²•ë“¤ì²˜ëŸ¼ ì¤‘ê°„ ë‹¨ê³„ ì—†ìŒ

### **2. ë†’ì€ í’ˆì§ˆ**
- ì‹¤ì‹œê°„ìœ¼ë¡œ ì–¼êµ´ ê²€ì¶œ ìƒíƒœ í™•ì¸ í›„ ìº¡ì²˜
- ì‚¬ìš©ìê°€ ì§ì ‘ ìµœì  íƒ€ì´ë° ì„ íƒ

### **3. ê°„ë‹¨í•œ ì›Œí¬í”Œë¡œìš°**
- ë³µì¡í•œ ê·¸ë£¹í•‘ì´ë‚˜ ë°°ì¹˜ ì²˜ë¦¬ ë¶ˆí•„ìš”
- í•œ ëª…ì”© ì •í™•í•˜ê²Œ ë“±ë¡

## ğŸ¯ **cí‚¤ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**

### **ê¶Œì¥ ìƒí™©**
```
âœ… ì‹ ê·œ ì¸ë¬¼ 1ëª…ì”© ì •í™•í•˜ê²Œ ë“±ë¡
âœ… ì‹¤ì‹œê°„ ë°ëª¨ë‚˜ í…ŒìŠ¤íŠ¸
âœ… ë†’ì€ í’ˆì§ˆì´ í•„ìš”í•œ ê²½ìš°
âœ… ì¦‰ì‹œ ì¸ì‹ ì‹œìŠ¤í…œì— ë°˜ì˜í•˜ê³  ì‹¶ì€ ê²½ìš°
```

### **ë¹„ê¶Œì¥ ìƒí™©**
```
âŒ ëŒ€ëŸ‰ì˜ ì¸ë¬¼ì„ í•œ ë²ˆì— ë“±ë¡
âŒ ê¸°ì¡´ ì‚¬ì§„/ë™ì˜ìƒì—ì„œ ì–¼êµ´ ì¶”ì¶œ
âŒ ìë™í™”ëœ ë°°ì¹˜ ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš°
```

## ğŸ”§ **êµ¬í˜„ ì˜ˆì‹œ ì½”ë“œ**

### **cí‚¤ ìº¡ì²˜ í•¸ë“¤ëŸ¬**
```python
def handle_c_key_capture(frame, camera_id):
    """cí‚¤ ìº¡ì²˜ ì²˜ë¦¬"""
    
    # 1. ì‹¤ì‹œê°„ ì–¼êµ´ ê²€ì¶œ
    faces = face_detector.detect(frame)
    if not faces:
        print("âŒ ì–¼êµ´ì´ ê²€ì¶œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
        return
    
    # 2. ê°€ì¥ í° ì–¼êµ´ ì„ íƒ
    main_face = max(faces, key=lambda f: f.bbox.area)
    
    # 3. ì–¼êµ´ í¬ë¡­
    face_crop = crop_face(frame, main_face.bbox)
    
    # 4. ì´ë¦„ ì…ë ¥ ë°›ê¸°
    person_name = input("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”: ").strip()
    if not person_name:
        print("âŒ ì´ë¦„ì´ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
        return
    
    # 5. ì¦‰ì‹œ ì €ì¥
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    filename = f"{person_name}_{timestamp}_manual.jpg"
    save_path = STORAGE_PATHS['raw_input']['manual'] / filename
    
    cv2.imwrite(str(save_path), face_crop)
    
    # 6. ë©”íƒ€ë°ì´í„° ì €ì¥
    metadata = {
        "person_name": person_name,
        "capture_method": "manual_c_key",
        "timestamp": datetime.now().isoformat(),
        "face_bbox": main_face.bbox.to_list(),
        "confidence": main_face.confidence,
        "camera_id": camera_id,
        "immediate_processing": True
    }
    
    metadata_path = save_path.with_suffix('.json')
    with open(metadata_path, 'w') as f:
        json.dump(metadata, f, indent=2)
    
    # 7. ì¦‰ì‹œ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ì‹œì‘
    process_manual_capture(save_path, metadata)
    
    print(f"âœ… {person_name} ë“±ë¡ ì™„ë£Œ!")
```

## ğŸ“‹ **ìš”ì•½**

### **cí‚¤ ìº¡ì²˜ = ì¦‰ì‹œ ì™„ì„±í˜• ë“±ë¡**
- **ì €ì¥ ìœ„ì¹˜**: `data/domains/face_recognition/raw_input/manual/`
- **íŠ¹ì§•**: ì–¼êµ´ ê²€ì¶œ + ì´ë¦„ ì§€ì • + í’ˆì§ˆ ê²€ì¦ì´ ì¦‰ì‹œ ì™„ë£Œ
- **ê²°ê³¼**: ë°”ë¡œ ì¸ì‹ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš© ê°€ëŠ¥

### **ë‹¤ë¥¸ ë°©ë²•ë“¤ = ë‹¨ê³„ë³„ ì²˜ë¦¬**
- **ì €ì¥ ìœ„ì¹˜**: `raw_input/captured/`, `raw_input/uploads/` ë“±
- **íŠ¹ì§•**: ë‚˜ì¤‘ì— ë°°ì¹˜ ì²˜ë¦¬ë¡œ ê·¸ë£¹í•‘ ë° ì´ë¦„ ì§€ì •
- **ê²°ê³¼**: ì¤‘ê°„ ë‹¨ê³„ë¥¼ ê±°ì³ ìµœì¢… ë“±ë¡

**cí‚¤ ìº¡ì²˜ëŠ” "ì¦‰ì‹œ ë“±ë¡" ë°©ì‹ìœ¼ë¡œ, ë‹¤ë¥¸ ë°©ë²•ë“¤ê³¼ëŠ” ì™„ì „íˆ ë‹¤ë¥¸ í”Œë¡œìš°ë¥¼ ê°€ì§‘ë‹ˆë‹¤!** âœ¨

---
*ì‘ì„±ì¼: 2025-06-29*
*ë²„ì „: v1.0* 