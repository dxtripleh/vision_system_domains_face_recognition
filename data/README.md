# Data 폴더 구조 및 관리 가이드

## 📋 개요

이 폴더는 비전 시스템의 모든 런타임 데이터를 저장하는 중앙 저장소입니다.
학습 데이터(datasets/)와 달리 이 폴더는 **실행 중 생성되는 동적 데이터**를 저장합니다.

## 🏗️ 전체 폴더 구조

```
data/
├── domains/                    # 도메인별 데이터
│   ├── humanoid/              # 인간형 도메인
│   │   └── face_recognition/  # 얼굴인식 데이터
│   │       ├── 1_raw/         # 1단계: 원본 데이터
│   │       ├── 2_extracted/   # 2단계: 추출된 특이점
│   │       ├── 3_clustered/   # 3단계: 그룹핑된 데이터
│   │       ├── 4_labeled/     # 4단계: 라벨링된 데이터
│   │       ├── 5_embeddings/  # 5단계: 임베딩 벡터
│   │       ├── 6_realtime/    # 6단계: 실시간 인식
│   │       ├── 7_database/    # 7단계: 데이터베이스
│   │       ├── 8_monitoring/  # 8단계: 성능 모니터링
│   │       ├── 9_learning/    # 9단계: 지속적 학습
│   │       ├── cache/         # 캐시 데이터
│   │       ├── models/        # 도메인별 모델
│   │       └── traceability/  # 추적성 데이터
│   └── factory/               # 공장 도메인
│       └── defect_detection/  # 불량 검출 데이터
│           ├── 6_realtime/    # 6단계: 실시간 검출
│           ├── 7_database/    # 7단계: 데이터베이스
│           ├── 8_monitoring/  # 8단계: 성능 모니터링
│           └── 9_learning/    # 9단계: 지속적 학습
├── output/                    # 시스템 출력 결과
├── logs/                      # 시스템 로그
└── temp/                      # 임시 파일 (자동 정리)
```

## 📊 데이터 분류 및 용도

### 🎯 **domains/ - 도메인별 데이터**
- **용도**: 각 도메인의 9단계 파이프라인 데이터
- **보관 기간**: 단계별로 다름 (1일~90일)
- **크기**: 도메인별로 다름 (1GB~1TB)

### 🎯 **output/ - 시스템 출력**
- **용도**: 최종 처리 결과, 리포트, 시각화
- **보관 기간**: 사용자 정의 (기본 30일)
- **크기**: 프로젝트별로 다름 (100MB~10GB)

### 🎯 **logs/ - 시스템 로그**
- **용도**: 애플리케이션 로그, 에러 로그, 성능 로그
- **보관 기간**: 30일 (자동 로테이션)
- **크기**: 일일 10MB~100MB

### 🎯 **temp/ - 임시 파일**
- **용도**: 처리 중 임시 파일, 캐시
- **보관 기간**: 24시간 (자동 정리)
- **크기**: 실시간 변동 (최대 1GB)

## 🔧 데이터 관리 규칙

### 📁 **파일 네이밍 규칙**
```python
# 기본 패턴: {timestamp}_{index}_{info}.{ext}
# 예시: 20250704_133022_001_face.jpg

# 도메인별 패턴:
# humanoid: {timestamp}_{person_id}_{feature}.{ext}
# factory: {timestamp}_{product_id}_{defect_type}.{ext}
```

### 🗂️ **폴더별 접근 권한**
- **domains/**: 읽기/쓰기 (도메인별)
- **output/**: 읽기/쓰기 (모든 사용자)
- **logs/**: 읽기 전용 (관리자만 쓰기)
- **temp/**: 읽기/쓰기 (자동 정리)

### 🔄 **자동 정리 정책**
```python
CLEANUP_POLICIES = {
    'temp/': {
        'max_age_hours': 24,
        'max_size_mb': 1000,
        'auto_cleanup': True
    },
    'logs/': {
        'max_age_days': 30,
        'max_size_mb': 1000,
        'auto_rotation': True
    },
    'output/': {
        'max_age_days': 90,
        'max_size_mb': 10000,
        'user_defined': True
    }
}
```

## 🚫 **절대 금지 사항**

### ❌ **루트 디렉토리에 직접 파일 생성 금지**
```python
# 금지 사항
data/result.jpg          # ❌ 금지
data/temp_file.txt       # ❌ 금지
data/debug.log           # ❌ 금지

# 올바른 방법
data/output/result.jpg   # ✅ 허용
data/temp/temp_file.txt  # ✅ 허용
data/logs/debug.log      # ✅ 허용
```

### ❌ **하드코딩된 경로 사용 금지**
```python
# 금지 사항
path = "C:/Users/user/data/output"  # ❌ 금지

# 올바른 방법
from pathlib import Path
project_root = Path(__file__).parent.parent
output_path = project_root / "data" / "output"  # ✅ 허용
```

## 🔍 **데이터 추적성**

### 📋 **메타데이터 관리**
- 모든 데이터 파일은 메타데이터와 함께 저장
- 생성 시간, 수정 시간, 소스 정보 기록
- 데이터 품질 점수 자동 계산

### 🔗 **데이터 연결**
- 원본 데이터 → 처리된 데이터 → 결과 데이터 연결
- 각 단계별 데이터 간 관계 추적
- 데이터 무결성 검증

## 📈 **성능 최적화**

### 💾 **저장소 최적화**
- 압축 알고리즘 사용 (ZIP, LZ4)
- 중복 데이터 제거
- 계층적 저장 구조

### ⚡ **접근 속도 최적화**
- 인덱스 파일 생성
- 캐시 시스템 활용
- 병렬 처리 지원

## 🔒 **보안 및 개인정보 보호**

### 🔐 **데이터 암호화**
- 민감한 데이터는 암호화 저장
- 접근 권한 관리
- 감사 로그 기록

### 🛡️ **GDPR 준수**
- 개인정보 자동 익명화
- 데이터 보존 기간 관리
- 사용자 동의 추적

## 📊 **모니터링 및 알림**

### 📈 **저장소 모니터링**
- 디스크 사용량 실시간 모니터링
- 파일 접근 패턴 분석
- 성능 지표 수집

### 🚨 **알림 시스템**
- 저장소 용량 80% 초과 시 알림
- 데이터 손상 감지 시 알림
- 백업 실패 시 알림

## 🔧 **유지보수**

### 🧹 **정기 정리**
- 매일: temp/ 폴더 정리
- 매주: logs/ 폴더 로테이션
- 매월: output/ 폴더 정리

### 📋 **백업 정책**
- 일일: 중요 데이터 백업
- 주간: 전체 데이터 백업
- 월간: 전체 시스템 백업

## 📚 **관련 문서**

- [도메인별 데이터 구조](./domains/)
- [로그 관리 가이드](./logs/README.md)
- [출력 데이터 관리](./output/README.md)
- [임시 파일 관리](./temp/README.md) 